# 全体
ld.lldのオプションに`-z separate-code`を追加で付ける。
https://www.czu.jp/blog/20210405
> lvm@10 以降では、リンク後のファイルサイズ削減のために ELF ファイルのセクション間のゼロ埋め処理がデフォルトで省略される動きになったので、書籍通りのコマンドでは正しく動かない。
> 具体的には、lld@10以降でリンクした elf ファイルを readelf で見たときに、 エントリーポイントのアドレスが 0x101120 と表示されるものの、 実際にメモリ上にカーネルが展開されたときに命令が存在するアドレスは 0x00100120 なので正しく命令が実行できない模様。 （ld.lld@9では命令が存在する箇所まで0x00で埋まっており、カーネル展開後はエントリポイントのアドレスと命令が存在するアドレスが一致していた）
> llvm@9 系と同じくゼロ埋めありでリンクする -z separate-code というオプションを見つけた

# 4.1
+ make実行前に、以下を実行する
    + `source $HOME/osbook/devenv/buildenv.sh`
    + インクルード先など、コンパイルオプションを追加する。
+ make all, make cleanなどターゲットファイルが存在しない場合は、**.PHONY**宣言を付ける。
    + all, cleanといった名前のファイルが存在する際の衝突を防げる。
+ makeで使用できる変数
    + `%<` : 依存ファイルの先頭１つ
    + `%^` : 依存ファイル全て
    + `%@` : ターゲット
    + `$*` : ターゲットのstem
        + e.g. ターゲットが%.o, 実際の入力がfoo.oなら、stemはfoo.
+ 依存ファイルにMakefileを追加することで、Makefileが更新されるたびに再ビルドを強制できる。

